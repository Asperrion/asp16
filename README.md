# ASP-16

ASP-16 ‚Äî —ç—Ç–æ —É—á–µ–±–Ω–æ-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–æ–±–æ–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —ç–º—É–ª—è—Ü–∏—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ 16-–±–∏—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–æ–º –¥–ª—è –Ω–µ–≥–æ.

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å —Ü–µ–ª—å—é –∏–∑—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤, —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ
–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üß† –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è 16-–±–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- üßæ –û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è ISA (–Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)
- üß¨ –≠–º—É–ª—è—Ü–∏—è –ø–∞–º—è—Ç–∏
- üßµ –°—Ç–µ–∫ –∏ –≤—ã–∑–æ–≤—ã –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º (`call / ret`)
- üßæ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (4 –±–∞–π—Ç–∞)
- üíæ –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `.asp`
- üõ† –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∞—Å—Å–µ–º–±–ª–µ—Ä `.asmp`
- üè∑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç–æ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- üñ® Memory-mapped I/O (–≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª–æ–≤ –∏ —á–∏—Å–µ–ª)
- üîå BIOS-–∑–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
asp-16/
‚îú‚îÄ‚îÄ assembler/        # –ê—Å—Å–µ–º–±–ª–µ—Ä (.asmp ‚Üí .asp)
‚îÇ   ‚îú‚îÄ‚îÄ asmp.cpp
‚îÇ   ‚îî‚îÄ‚îÄ isa.h
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bios/         # BIOS –∏ –∑–∞–≥—Ä—É–∑—á–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ cpu/          # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è CPU
‚îÇ   ‚îú‚îÄ‚îÄ memory/       # –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ util/         # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ programs/         # –ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ <filename>.asmp # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –Ω–∞ asmp
‚îÇ
‚îú‚îÄ‚îÄ asmp.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Å—Å–µ–º–±–ª–µ—Ä–∞
‚îú‚îÄ‚îÄ ISA.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ISA
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ Makefile

````

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

- **–†–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å:** 16 –±–∏—Ç
- **–†–µ–≥–∏—Å—Ç—Ä—ã:**
  - AX, BX, CX, DX ‚Äî –æ–±—â–∏–µ
  - SP ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
  - IP ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
  - FLAGS ‚Äî —Ñ–ª–∞–≥–∏
- **–°—Ç–µ–∫:** —Ä–∞—Å—Ç—ë—Ç –≤–Ω–∏–∑
- **–ê–¥—Ä–µ—Å–∞—Ü–∏—è:** –ø—Ä—è–º–∞—è
- **–§–æ—Ä–º–∞—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** 4 –±–∞–π—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å–º. –≤ [`ISA.md`](ISA.md).

---

## üßæ –ê—Å—Å–µ–º–±–ª–µ—Ä (ASMP)
–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ [`asmp.md`](asmp.md).

–ê—Å—Å–µ–º–±–ª–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –º–µ—Ç–∫–∏
- –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`;`)
- –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ –∏ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —á–∏—Å–ª–∞
- —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

---

## üñ® Memory-Mapped I/O

–í–≤–æ–¥-–≤—ã–≤–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –ø–∞–º—è—Ç–∏:

|  –ê–¥—Ä–µ—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ            |
| -----: | --------------------- |
| 0xFF00 | –í—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª–∞ (char)  |
| 0xFF02 | –í—ã–≤–æ–¥ —á–∏—Å–ª–∞ (decimal) |

---

## üî® –°–±–æ—Ä–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä GCC —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º G++
````

### –°–±–æ—Ä–∫–∞ —ç–º—É–ª—è—Ç–æ—Ä–∞ –∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞

```bash
make
```

### –°–±–æ—Ä–∫–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
./asmp programs/test.asmp programs/test.asp
```

### –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞

```bash
./asp16 programs/test.asp
```

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

ASP-16 ‚Äî —ç—Ç–æ:

* –Ω–µ —ç–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ CPU
* –Ω–µ –∫–ª–æ–Ω x86 –∏–ª–∏ ARM

–≠—Ç–æ **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
–∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã.
